{"mappings":"AACO,MAKDA,EAAe,IAAIC,gBAAgB,CACrCC,OAAQ,OACRC,WAAY,OACZC,MAAO,OACPC,MAAO,KAULC,EAAiB,CACnBC,OAAQ,MACRC,QARY,IAAIC,QAAQ,CAC1B,eAAgB,mBAChB,YAAa,0EAOXC,SAAU,UCjBRC,EAAWC,SAASC,cAAc,iBAClCC,EAAaF,SAASC,cAAc,aACpCE,EAASH,SAASC,cAAc,WAChCG,EAAMJ,SAASC,cAAc,UAGMF,EAAhCM,iBAAiB,UAMuB,SAA9BC,GACf,MAAMC,EAAsBD,EAAIE,cAAcC,MAEEN,EAAzCO,UAAUC,OAAO,aAEAP,EAApBM,UAAUE,IAAI,aAESV,EAAhBW,UAAY,IDcIC,ECZXP,EDcTQ,MAAM,uCAAcD,IAAWpB,GACjCsB,MAAKC,IAEF,IAAKA,EAASC,GACV,MAAM,IAAIC,MAAMF,EAASG,YAE7B,OAAOH,EAASI,MAAM,KCnBzBL,MAAKM,IAEoBnB,EAAfO,UAAUE,IAAI,aAEwBV,EAAlCW,UAoCvB,SAA2BU,GACvB,MAAMC,IAAEA,EAAKC,SAASC,KAAEA,EAAIC,YAAEA,EAAWC,YAAEA,KAAmBL,EAC9D,MAAO,+CACaC,uEAEQE,0CACCC,0FACiDC,gC,CA3C/CC,CAAkBP,EAAO,IAGnDQ,OAAMC,IAEmB5B,EAAfO,UAAUE,IAAI,aAEIR,EAArBM,UAAUC,OAAO,YAAY,IDAd,IAAAG,C,ICxBoBX,EAA5CO,UAAUC,OAAO,aDabI,MAAM,8CAA2B3B,IAAgBM,GACnDsB,MAAKC,IAEmB,IAAhBA,EAASC,GACV,MAAM,IAAIC,MAAMF,EAASG,YAE7B,OAAOH,EAASI,MAAM,ICY7BL,MAAKM,IAEoBnB,EAAfO,UAAUE,IAAI,aAEQb,EAApBW,UAAUC,OAAO,aAEeZ,EAAhCc,UAAuBS,EAYvBU,KAAI,EAACC,GAAEA,EAAIR,SAASC,KAAEA,OAAc,kCAAkCO,MAAOP,eAAiBQ,KAAK,GAZrE,IAG1CJ,OAAMC,IAEmB5B,EAAfO,UAAUE,IAAI,aAEIR,EAArBM,UAAUC,OAAO,YAAY","sources":["src/js/cat-api.js","src/index.js"],"sourcesContent":["// Базовый URL\nconst BASE_URL = 'https://api.thecatapi.com/v1/images/';\n// Название end_point\nconst END_POINT = 'search';\n\n// Параметры поиска\nconst searchParams = new URLSearchParams({\n    format: 'json',\n    has_breeds: 'true',\n    order: 'RAND',\n    limit: 50,\n});\n\n// Параметры заголовка\nconst headers = new Headers({\n  \"Content-Type\": \"application/json\",\n  \"x-api-key\": \"live_xLh0xd4Q45caNiYkcZ60mZOWOfvOy7CFgjitW2LhWxbyMwFC9iIxdrvdfjIvRwNt\",\n});\n\n// Опции поиска\nconst requestOptions = {\n    method: 'GET',\n    headers: headers,\n    redirect: 'follow',\n};\n\n// Функция запроса на сервер\nexport const fetchBreeds = () => { \n    return fetch(`${BASE_URL}${END_POINT}?${searchParams}`, requestOptions)\n        .then(response => {\n            // Проверка статуса ответа\n            if (!response.ok) {\n                throw new Error(response.statusText)\n            };\n            return response.json();\n        })\n};\n\n// Функция запроса информации по выбранной кошке\nexport const fetchCatByBreed = breedId => {\n    // return fetch(`${BASE_URL}${END_POINT}?breed_ids=${breedId}`, requestOptions)\n    return fetch(`${BASE_URL}${breedId}`, requestOptions)\n        .then(response => {\n            // Проверка статуса ответа\n            if (!response.ok) {\n                throw new Error(response.statusText)\n            };\n            return response.json();\n        })\n};","import { fetchBreeds } from './js/cat-api';\nimport { fetchCatByBreed } from './js/cat-api';\n\n// import axios from \"axios\";\n// axios.defaults.headers.common[\"x-api-key\"] = \"live_xLh0xd4Q45caNiYkcZ60mZOWOfvOy7CFgjitW2LhWxbyMwFC9iIxdrvdfjIvRwNt\";\n\nconst listCats = document.querySelector('.breed-select');\nconst infoOfCats = document.querySelector('.cat-info');\nconst loader = document.querySelector('.loader');\nconst err = document.querySelector('.error');\n\n// Слушатель на изменение поля выбора породы кошки\nlistCats.addEventListener('change', setOutput);\n\n// Открытие фразы загрузчика при начальной загрузке страницы\nloader.classList.remove('js-hidden');\n\n// Функция определения выбранной породы и запроса на сервер\nfunction setOutput(evt) {\n    const selectedOptionValue = evt.currentTarget.value;\n    // Открытие фразы загрузчика в начале загрузки информации\n    loader.classList.remove('js-hidden');\n    // Скрытие сообщения об ошибке\n    err.classList.add('js-hidden');\n    // Очистка предыдущей информации\n    infoOfCats.innerHTML = '';\n    // Вызов функции запроса информации по выбранной кошке\n    fetchCatByBreed(selectedOptionValue)\n        .then(result => {\n            // Скрытие фразы загрузчика\n            loader.classList.add('js-hidden');\n            // Добавление разметки с информацией о выбранной кошке\n            infoOfCats.innerHTML = createDescription(result);\n        })\n        // .catch(error => console.log('Oops! Something went wrong! Try reloading the page!', error));\n        .catch(error => {\n            // Скрытие фразы загрузчика\n            loader.classList.add('js-hidden');\n            // Открытие сообщения об ошибке\n            err.classList.remove('js-hidden');\n        }\n    );\n}\n\n// Вызов функции запроса на сервер для формирования списка кошек\nfetchBreeds()\n    .then(result => {\n        // Скрытие фразы загрузчика\n        loader.classList.add('js-hidden');\n        // Открытие окна выбора породы кошки\n        listCats.classList.remove('js-hidden');\n        // Добавления списка кошек в разметку опций выбора\n        listCats.innerHTML = createList(result);\n    })\n    // .catch(error => console.log('Oops! Something went wrong! Try reloading the page!', error));\n    .catch(error => {\n        // Скрытие фразы загрузчика\n        loader.classList.add('js-hidden');\n        // Открытие сообщения об ошибке\n        err.classList.remove('js-hidden');\n    });\n\n// Функция создания разметки выпадающего списка кошек\nfunction createList(array) {\n    return array.map(({ id, breeds: [{ name }] }) => `<option class=\"js-list\" value=\"${id}\">${name}</option>`).join('')\n};\n\n// Функция создания разметки с информацией о выбранной кошке\nfunction createDescription(arr) {\n    const { url, breeds: [{ name, description, temperament }] } = arr;\n    return `<ul class=\"js-data\">\n        <li><img src=\"${url}\" width=\"400px\"></li>\n        <li>\n            <h1 class=\"js-h1\">${name}</h1>\n            <p class=\"js-text\">${description}</p>\n            <p class=\"js-text\"><span class=\"js-temperament\">Temperament: </span>${temperament}</p>\n       </li>\n    </ul>`\n};"],"names":["$c4ebbd28ee7007ee$var$searchParams","URLSearchParams","format","has_breeds","order","limit","$c4ebbd28ee7007ee$var$requestOptions","method","headers","Headers","redirect","$1f0dc3b9307be026$var$listCats","document","querySelector","$1f0dc3b9307be026$var$infoOfCats","$1f0dc3b9307be026$var$loader","$1f0dc3b9307be026$var$err","addEventListener","evt","selectedOptionValue","currentTarget","value","classList","remove","add","innerHTML","breedId","fetch","then","response","ok","Error","statusText","json","result","arr","url","breeds","name","description","temperament","$1f0dc3b9307be026$var$createDescription","catch","error","map","id","join"],"version":3,"file":"index.02f67f67.js.map"}